(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(e,t,a){e.exports=a(223)},211:function(e,t,a){},215:function(e,t,a){},217:function(e,t,a){},223:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(102),c=a.n(i),l=a(5),s=a(6),o=a(8),u=a(7),m=a(9),p=a(226),d=a(225),h=(a(95),a(19)),b=a.n(h),E=a(224),f=(a(211),function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e;return this.props.isLoggedIn?(e=r.a.createElement("li",null,r.a.createElement(E.a,{to:"/profile"},"Profile")),r.a.createElement("li",null,r.a.createElement(E.a,{to:"/logout"},"Logout"))):(e=r.a.createElement("li",null,r.a.createElement(E.a,{to:"/signup"},"Signup")),r.a.createElement("li",null,r.a.createElement(E.a,{to:"/login"},"Login"))),r.a.createElement("div",{className:"navbar"},r.a.createElement("ul",null,e))}}]),t}(n.Component)),v=a(13),O=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{action:"",onSubmit:this.props.loginSubmit},r.a.createElement("div",null,r.a.createElement("label",null,"Email:"),r.a.createElement("input",{className:"form-control",name:"email",ref:"email",required:!0,type:"email"})),r.a.createElement("div",null,r.a.createElement("label",null,"Password:"),r.a.createElement("input",{className:"form-control",name:"password",ref:"password",type:"password"})),r.a.createElement("button",null,"Submit"))}}]),t}(n.Component),j=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{action:"",onSubmit:this.props.signupSubmit},r.a.createElement("div",null,r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",name:"email",id:"email"})),r.a.createElement("div",null,r.a.createElement("label",null,"Email:"),r.a.createElement("input",{type:"text",name:"email",id:"email"})),r.a.createElement("div",null,r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",name:"password",id:"password"})),r.a.createElement("button",null,"Submit"))}}]),t}(n.Component),y=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).loginSubmit=function(e){e.preventDefault();var t=e.target.email.value,n=e.target.password.value;b.a.post("api/login",{email:t,password:n}).then(function(e){e.data&&a.props.history.push("/teamselection")}).catch(function(e){throw e})},a.signupSubmit=function(e){e.prevenDefault(),b.a.post("api/signup").then(function(e){e.data&&a.props.history.push("/teamselection")})},a.formButton=function(){a.state.Signup?a.setState({Signup:!1}):a.setState({Signup:!0})},a.state={Signup:!1},a.loginSubmit=a.loginSubmit.bind(Object(v.a)(Object(v.a)(a))),a.signupSubmit=a.signupSubmit.bind(Object(v.a)(Object(v.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e;return e=this.state.Signup?r.a.createElement(j,{signupSubmit:this.signupSubmit}):r.a.createElement(O,{loginSubmit:this.loginSubmit}),r.a.createElement("div",{id:"homepage"},e)}}]),t}(n.Component),g=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"Profielpagina WIP")}}]),t}(n.Component),S=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).selectRider=function(){"unselected"===a.props.selected&&a.props.selectRider(a.props.riderID)},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("button",{className:this.props.selected,onClick:function(){return e.selectRider(e.props.riderID)}},this.props.selected)}}]),t}(n.Component),R=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("tr",{className:this.props.selected},r.a.createElement("td",null,this.props.name),r.a.createElement("td",null,this.props.team),r.a.createElement("td",null,this.props.price),r.a.createElement("td",null,r.a.createElement(S,{selected:this.props.selected,selectRider:this.props.selectRider,riderID:this.props.riderID})))}}]),t}(n.Component),k=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=[];return this.props.riders.map(function(a){var n=a.name,i=a.team,c=a.price,l=a.rider_participation_id,s=a.selected;(e.props.budget<c||e.props.selectionLength>=20)&&"selected"!==s?t.push(r.a.createElement(R,{name:n,team:i,price:c,selected:"unselectable",key:l,riderID:l,selectRider:e.props.selectRider})):t.push(r.a.createElement(R,{name:n,team:i,price:c,selected:s,key:l,riderID:l,selectRider:e.props.selectRider}))}),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Team"),r.a.createElement("th",null,"Price"))),r.a.createElement("tbody",null,t))}}]),t}(n.Component),C=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).removeRider=function(){a.props.removeRider(a.props.riderID)},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("button",{className:this.props.selected,onClick:function(){return e.removeRider(e.props.riderID)}},"Remove Rider")}}]),t}(n.Component),w=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props;return r.a.createElement("tr",null,r.a.createElement("td",null,e.firstname),r.a.createElement("td",null,e.lastname),r.a.createElement("td",null,e.team),r.a.createElement("td",null,e.price),r.a.createElement("td",null,r.a.createElement(C,{removeRider:this.props.removeRider,riderID:this.props.riderID})))}}]),t}(n.Component),I=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=[];return this.props.selection.map(function(a){var n=a.firstname,i=a.lastname,c=a.team,l=a.price,s=a.rider_participation_id;t.push(r.a.createElement(w,{firstname:n,lastname:i,team:c,price:l,key:s,riderID:s,removeRider:e.props.removeRider}))}),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"First Name"),r.a.createElement("th",null,"Last Name"),r.a.createElement("th",null,"Team"),r.a.createElement("th",null,"Price"))),r.a.createElement("tbody",null,t))}}]),t}(n.Component),N=(a(215),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).selectRider=function(e){var t=a.state.race,n=a.state.year;b.a.post("/api/teamselectionadd",{race:t,year:n,rider_participation_id:e}).then(function(t){if(t){var n=a.state.userSelection.push(e);a.setState({userSelection:n})}})},a.removeRider=function(e){var t=a.state.race,n=a.state.year;b.a.post("/api/teamselectionremove",{race:t,year:n,rider_participation_id:e}).then(function(t){console.log(t);var n=a.state.userSelection.pop(e);t&&a.setState({userSelection:n})})},a.state={riders:[],userSelection:[],race:"vuelta",year:"2018",budget:0},a.selectRider=a.selectRider.bind(Object(v.a)(Object(v.a)(a))),a.removeRider=a.removeRider.bind(Object(v.a)(Object(v.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.race,a=this.state.year;b.a.post("/api/getridersandteam",{race:t,year:a}).then(function(t){e.setState({riders:t.data.allRiders,userSelection:t.data.userSelection,budget:t.data.budget})})}},{key:"render",value:function(){var e=this.state.riders,t=this.state.userSelection,a=this.state.userSelection.length,n=this.state.budget;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"ridertablecontainer"},r.a.createElement(k,{riders:e,selectionLength:a,budget:n,selectRider:this.selectRider})),r.a.createElement("div",{className:"usertablecontainer"},r.a.createElement(I,{selection:t,removeRider:this.removeRider})))}}]),t}(n.Component)),D=(a(217),function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.output,t=[],a=[],n=[];if(e.length>0){Object.keys(e[0]).forEach(function(e){t.push(r.a.createElement("th",null,e))});for(var i=0;i<e.length;i++){for(var c in e[i])a.push(r.a.createElement("td",null,e[i][c]));n.push(r.a.createElement("tr",null,a)),a=[]}}return r.a.createElement("table",{className:"outputTable"},r.a.createElement("thead",null,r.a.createElement("tr",null,t)),r.a.createElement("tbody",null,n))}}]),t}(n.Component)),L=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).submitQuery=function(e){e.preventDefault(),b.a.post("/api/admin",{query:a.state.value}).then(function(e){a.setState({output:e.data.data})})},a.state={output:[],value:""},a.submitQuery=a.submitQuery.bind(Object(v.a)(Object(v.a)(a))),a.handleChange=a.handleChange.bind(Object(v.a)(Object(v.a)(a))),a.testButton=a.testButton.bind(Object(v.a)(Object(v.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"testButton",value:function(e){this.setState({value:e.target.value})}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",null,r.a.createElement("form",{action:"",onSubmit:this.submitQuery,id:"queryform"},r.a.createElement("textarea",{className:"queryInputBox",rows:"12",cols:"80",value:this.state.value,onChange:this.handleChange}),r.a.createElement("input",{type:"submit",value:"submit"})),r.a.createElement("button",{onClick:this.testButton,value:"SELECT * FROM account",className:"queryButton"},"Get all accounts"),r.a.createElement("button",{onClick:this.testButton,value:"SELECT race_id FROM race WHERE name = '' AND year = ''",className:"queryButton"},"Get race ID"),r.a.createElement("button",{onClick:this.testButton,value:"SELECT rider.firstname || ' ' || rider.lastname as name, price, team, rider_participation_id FROM rider_participation INNER JOIN rider using(rider_id) WHERE race_id = ${race_id}",className:"queryButton"},"Get all riders"),r.a.createElement("div",{className:"outputTableContainer"},r.a.createElement(D,{output:this.state.output}))))}}]),t}(n.Component),_=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={isLoggedIn:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return b.a.post("api/isloggedin",{withCredentials:!0}).then(function(t){e.state.isLoggedIn!==t.data&&e.setState({isLoggedIn:t.data}),e.state.isLoggedIn||"/"===e.props.history.location.pathname||e.props.history.replace("/")}).catch(function(e){throw e}),r.a.createElement("div",null,r.a.createElement(f,{isLoggedIn:this.state.isLoggedIn}),r.a.createElement("div",{className:"pageContainer"},r.a.createElement(p.a,{exact:!0,path:"/",render:function(){return e.state.isLoggedIn?r.a.createElement(d.a,{to:"/teamselection"}):r.a.createElement(y,{history:e.props.history})}}),r.a.createElement(p.a,{path:"/profile",component:g,history:this.props.history}),r.a.createElement(p.a,{path:"/teamselection",component:N,history:this.props.history}),r.a.createElement(p.a,{path:"/admin",component:L,history:this.props.history})))}}]),t}(n.Component),B=a(227);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var q=a(103),P=a.n(q)()();c.a.render(r.a.createElement(B.a,{history:P},r.a.createElement(_,{history:P})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},95:function(e,t,a){}},[[104,2,1]]]);
//# sourceMappingURL=main.adcb28bf.chunk.js.map